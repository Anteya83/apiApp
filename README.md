1) при проведении инвентар датой ранее текущей - во всех  инв. после этой даты по этому товару пересчитаются и перезаполнятся ошибки инв-ции  
2)при проведении прихода датой ранее -во всех  инв. после этой даты по этому товару пересчитаются и перезаполнятся ошибки инв-ции и ср цена 
3)при проведении расхода датой ранее -во всех  инв. после этой даты по этому товару пересчитаются и перезаполнятся ошибки инв-ции 

Поэтому руками в бд ничего нельзя заводить!!! 
Сделала один тест tests/Api/OutDocumentTest - просто показать, что умею)) 
При заведении документа расход , если на складе по остаткам товара не будет или его количество меньше чем в расходном док-те вернется ошибка, 
но остаток считается на дату документа, поэтому если завести более ранней датой приход завести получится, но расход текущей датой уже при 
минусовом остатке не даст- как сигнал бухгалтерии, что нужно сначала завести приход 
 
В терминале: 
php artisan migrate - создаст все таблицы 
php artisan serve - запустит сервер 

в файле env нужно внести свои данные для подключения к бд 
в файлу config/database нужно указать   'default' => env('DB_CONNECTION', 'sqlite'), базу данных используемую и внести соотв данные 

Инструкция к API  

Приход  
  -POST /api/income-documents — создать новый приход
   Пример корректного запроса
   {
       "date": "2024-08-02 08:01:02",  Не ОБЯЗАТЕЛЬНЫЙ ПАРАМЕТР, ЕСЛИ ДАТУ НЕ ПЕРЕДАТЬ ДАТОЙ ДОКУМЕНТА БУДЕТ СЧИТАТЬСЯ ТЕКУЩАЯ ДАТА
       "items": [{ "product_id": 6, "quantity": 4, "price": 10.10},{ "product_id": 5, "quantity": 3,"price": 10.10},...]
   }

Расход  
  -POST /api/out-documents — создать новый расход
  Пример корректного запроса
  // если на складе по остаткам товара не будет или его количество меньше чем в расходном док-те вернется ошибка - не хватает остатков на складе
  {
    "date": "2024-08-20 08:01:02",  Не ОБЯЗАТЕЛЬНЫЙ ПАРАМЕТР, ЕСЛИ ДАТУ НЕ ПЕРЕДАТЬ ДАТОЙ ДОКУМЕНТА БУДЕТ СЧИТАТЬСЯ ТЕКУЩАЯ ДАТА
    "items": [{ "product_id": 6, "quantity": 3},{ "product_id": 2, "quantity": 1},...]
  }

Инвентаризация  
  - POST /api/inventory-documents — создать инв-цию
  Пример корректного запроса
  {
      "date": "2024-08-20 08:01:02",  Не ОБЯЗАТЕЛЬНЫЙ ПАРАМЕТР, ЕСЛИ ДАТУ НЕ ПЕРЕДАТЬ ДАТОЙ ДОКУМЕНТА БУДЕТ СЧИТАТЬСЯ ТЕКУЩАЯ ДАТА
      "items": [{ "product_id": 6, "quantity": 3},{ "product_id": 2, "quantity": 1},...]
  }

  - GET /api/inventory-results?date=2024-08-21 — получить инвентаризации по дате
   Пример ответа
     [
         {
             "product_id": 6,
             "inventory_quantity": 9, количество по инв-ции
             "inventory_quantity_sum": 113.49, сумма по инв-ции
             "inventory_mistake": -1, ошибка инв-ции
             "inventory_mistake_sum": -12.61  сумма ошибки
         },
         {
             "product_id": 5,
             "inventory_quantity": 3,
             "inventory_quantity_sum": 35.04,
             "inventory_mistake": 1,
             "inventory_mistake_sum": 11.68
         },
         {
             "product_id": 2,
             "inventory_quantity": 1,
             "inventory_quantity_sum": 144.04,
             "inventory_mistake": -4,
             "inventory_mistake_sum": -576.16
         }
     ]


Вся история движения  
 - ответ отсортирован по id товара  и дате
 - GET /api/documents-history — получить историю движения

   Пример ответа
   [
       {
           "date": "2024-08-21 08:11:47",
           "type": "приход",
           "product_id": 2,
           "quantity": 8,
           "stock_after": 8     расчетный остаток
       },
       {
           "date": "2024-08-21 08:21:12",
           "type": "расход",
           "product_id": 2,
           "quantity": 2,
           "stock_after": 6
       },
       {
           "date": "2024-08-21 10:05:03",
           "type": "расход",
           "product_id": 2,
           "quantity": 1,
           "stock_after": 5
       },
       {
           "date": "2024-08-21 18:01:38",
           "type": "инвентаризация",
           "product_id": 2,
           "quantity": 1,
           "stock_after": 1,
           "inventory_mistake": -4  ошибка инвентаризации
       },
       {
           "date": "2024-08-21 08:11:47",
           "type": "приход",
           "product_id": 3,
           "quantity": 6,
           "stock_after": 6
       },
       {
           "date": "2024-08-21 08:21:12",
           "type": "расход",
           "product_id": 3,
           "quantity": 1,
           "stock_after": 5
       },
       {
           "date": "2024-08-21 11:24:15",
           "type": "расход",
           "product_id": 3,
           "quantity": 1,
           "stock_after": 4
       },....]


